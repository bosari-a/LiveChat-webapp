<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/signup.css" />
    <title>Signup</title>
  </head>
  <body>
    <div class="container">
      <span class="create-acc"
        >Create your account and start your journey!</span
      >
      <form class="signup">
        <label for="email">Email</label>
        <input type="email" id="email" size="50" required />

        <label for="username">Username</label>
        <input
          type="text"
          id="username"
          onkeyup="checkUsername()"
          size="50"
          required
        />
        <div class="error username-error"></div>

        <label for="password">Password</label>
        <input
          type="password"
          id="password"
          onkeyup="checkPassword()"
          size="50"
          required
        />
        <div class="error password-error"></div>

        <input class="signup-btn" type="submit" value="Sign up" />
      </form>
      <span class="loading display">Loading...</span>
      <a href="login.html">Login if you already have an account!</a>
    </div>
    <script src="js/signup-bundle.js"></script>
    <script>
      const signupForm = document.forms[0];

      function checkUsername() {
        try {
          if (!signupForm.username.value.match(/^[\w\s]+$/)) {
            throw Error(
              "Please enter a valid username (you can only use letters, numbers, and underscores)"
            );
          } else {
            document.querySelector(".username-error").classList.remove("error");
            document.querySelector(".username-error").innerText =
              "Valid username";
          }
        } catch (err) {
          document.querySelector(".username-error").classList.add("error");

          document.querySelector(".username-error").innerText = err.message;
        }
      }

      function checkPassword() {
        try {
          if (!signupForm.password.value.match(/^[^<>\s]{6,}$/)) {
            throw Error(
              "Your password should be valid and at least 6 characters long"
            );
          } else {
            document.querySelector(".password-error").classList.remove("error");
            document.querySelector(".password-error").innerText =
              "Valid password";
          }
        } catch (err) {
          document.querySelector(".password-error").classList.add("error");

          document.querySelector(".password-error").innerText = err.message;
        }
      }
    </script>
  </body>
</html>
